(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{giFI:function(t,n,i){"use strict";i.r(n),i.d(n,"NguoiDungModule",(function(){return K}));var e=i("ofXK"),a=i("PCNd"),r=i("3Pt+"),s=i("tyNb"),o=i("noPL"),c=i("ysXD"),l=i("09hN"),u=i("wPyj"),b=i("fXoL"),d=i("dEAy"),p=i("JqCM"),h=i("5eHb"),g=i("tk/3"),f=i("JIr8"),z=i("u9rP"),m=i("lGcX");let S=(()=>{class t{constructor(t,n){this.http=t,this.handleErrSvc=n,this.apiUrl="",this.apiUrl=z.a.API.NGUOI_DUNG}getAllUserPaging(t,n,i,e,a){const r=(new g.f).set("page",t.toString()).set("size",n.toString()).set("search",i||"").set("sort",e||"ASC").set("column",a||"email");return this.http.get(this.apiUrl+"/paging",{params:r}).pipe(Object(f.a)(this.handleErrSvc.handleError))}createUser(t){return this.http.post(this.apiUrl,t).pipe(Object(f.a)(this.handleErrSvc.handleError))}updateUser(t,n){return this.http.put(this.apiUrl+"/"+t,n).pipe(Object(f.a)(this.handleErrSvc.handleError))}changeStatusUser(t){return this.http.delete(this.apiUrl+"/"+t).pipe(Object(f.a)(this.handleErrSvc.handleError))}}return t.\u0275fac=function(n){return new(n||t)(b.Xb(g.c),b.Xb(m.a))},t.\u0275prov=b.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var T=i("B+r4"),C=i("C2AL"),v=i("PTRe"),y=i("OzZK"),D=i("RwU8"),N=i("rMZv"),w=i("/Aw2"),P=i("ZyQt");function A(t){return t.value?r.s.email(t):null}var O=i("yWOh"),j=i("N1Mu"),E=i("zAKX");function I(t,n){if(1&t&&b.Ob(0,"nz-option",20),2&t){const t=n.$implicit;b.jc("nzLabel",t.value)("nzValue",t.id)}}function k(t,n){if(1&t){const t=b.Ub();b.Tb(0,"i",23),b.ac("click",(function(){b.rc(t);const n=b.dc(2);return n.showPass=!n.showPass})),b.Sb()}}function F(t,n){if(1&t){const t=b.Ub();b.Tb(0,"i",24),b.ac("click",(function(){b.rc(t);const n=b.dc(2);return n.showPass=!n.showPass})),b.Sb()}}function U(t,n){if(1&t&&(b.Ac(0,k,1,0,"i",21),b.Ac(1,F,1,0,"i",22)),2&t){const t=b.dc();b.jc("ngIf",!t.showPass),b.zb(1),b.jc("ngIf",t.showPass)}}let M=(()=>{class t{constructor(t,n,i,e,a){this.fbd=t,this.userSvc=n,this.alert=i,this.spinner=e,this.formValidatorSvc=a,this.closePopup=new b.n,this.showPass=!1,this.listRole=[{id:"ROLE_ADMIN",value:"Qu\u1ea3n tr\u1ecb vi\xean"},{id:"ROLE_THI_SINH",value:"Ng\u01b0\u1eddi d\xf9ng"}]}ngOnInit(){this.createForm(),this.modalData.action===c.a.ACTION.EDIT&&(this.patchValue(),this.updateValidateField())}createForm(){this.form=this.fbd.group({name:["",[r.s.required]],email:["",[r.s.required,A]],password:["",[r.s.required]],rePassword:["",[r.s.required]],roles:[null,[r.s.required]]})}patchValue(){this.form.patchValue({name:this.modalData.data.name||"",email:this.modalData.data.email||"",roles:this.modalData.data.roles||[]})}updateValidateField(){this.form.get("password").setValidators(null),this.form.get("rePassword").setValidators(null),this.form.get("password").updateValueAndValidity(),this.form.get("rePassword").updateValueAndValidity()}displayFieldCss(t){return{"has-error":this.isFieldValid(t),"has-feedback":this.isFieldValid(t)}}isFieldValid(t){return!this.form.get(t).valid&&this.form.get(t).touched}onSubmit(){console.log(this.form),this.form.valid?(this.spinner.show(),this.modalData.action===c.a.ACTION.ADD?this.userSvc.createUser(this.form.value).subscribe(()=>{this.alert.success(o.a.MSG_CREATE_DONE),this.closePopup.emit(!0),this.spinner.hide()},()=>this.spinner.hide()):this.modalData.action===c.a.ACTION.EDIT?this.userSvc.updateUser(this.modalData.data.id,this.form.value).subscribe(()=>{this.alert.success(o.a.MSG_UPDATE_DONE),this.closePopup.emit(!0),this.spinner.hide()},()=>this.spinner.hide()):console.log("NO ACTION")):this.formValidatorSvc.validateAllFormFields(this.form)}onClose(){this.closePopup.emit(!1)}}return t.\u0275fac=function(n){return new(n||t)(b.Nb(r.e),b.Nb(S),b.Nb(h.b),b.Nb(p.c),b.Nb(O.a))},t.\u0275cmp=b.Hb({type:t,selectors:[["app-form-nguoi-dung"]],inputs:{modalData:"modalData"},outputs:{closePopup:"closePopup"},decls:49,vars:25,consts:[[3,"formGroup","ngSubmit"],["nz-row","",1,"mr-bot-10",3,"nzGutter"],["nz-col","","nzSpan","24"],["nz-col","","nzSpan","24",3,"ngClass"],["nz-input","","type","text","formControlName","name",1,"w-100"],["errorMsg","Kh\xf4ng \u0111\u01b0\u1ee3c b\u1ecf tr\u1ed1ng",3,"displayError"],["nz-input","","type","text","formControlName","email",1,"w-100"],["errorMsg","Email kh\xf4ng \u0111\xfang \u0111\u1ecbnh d\u1ea1ng",3,"displayError"],[3,"nzSuffix"],["nz-input","","formControlName","password",1,"w-100"],["nz-input","","formControlName","rePassword",1,"w-100"],["errorMsg","M\u1eadt kh\u1ea9u kh\xf4ng tr\xf9ng kh\u1edbp",1,"text-red",3,"displayError"],["formControlName","roles","nzMode","multiple","nzPlaceHolder","Ch\u1ecdn quy\u1ec1n h\u1ea1n",1,"w-100"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["errorMsg","Ch\u01b0a ch\u1ecdn quy\u1ec1n h\u1ea1n",3,"displayError"],["nz-row","",1,"mr-top-10",3,"nzGutter"],["nz-col","","nzSpan","24",1,"text-right"],["nz-button","","nzType","default","type","button",1,"mr-right-5",3,"click"],["nz-button","","nzType","primary","type","submit"],["suffixIconShowPass",""],[3,"nzLabel","nzValue"],["class","fas fa-eye",3,"click",4,"ngIf"],["class","fas fa-eye-slash",3,"click",4,"ngIf"],[1,"fas","fa-eye",3,"click"],[1,"fas","fa-eye-slash",3,"click"]],template:function(t,n){if(1&t&&(b.Tb(0,"form",0),b.ac("ngSubmit",(function(){return n.onSubmit()})),b.Tb(1,"div",1),b.Tb(2,"div",2),b.Tb(3,"span"),b.Cc(4,"H\u1ecd v\xe0 t\xean"),b.Sb(),b.Sb(),b.Tb(5,"div",3),b.Ob(6,"input",4),b.Ob(7,"app-field-error-display",5),b.Sb(),b.Sb(),b.Tb(8,"div",1),b.Tb(9,"div",2),b.Tb(10,"span"),b.Cc(11,"Email"),b.Sb(),b.Sb(),b.Tb(12,"div",3),b.Ob(13,"input",6),b.Ob(14,"app-field-error-display",5),b.Ob(15,"app-field-error-display",7),b.Sb(),b.Sb(),b.Tb(16,"div",1),b.Tb(17,"div",2),b.Tb(18,"span"),b.Cc(19,"M\u1eadt kh\u1ea9u"),b.Sb(),b.Sb(),b.Tb(20,"div",3),b.Tb(21,"nz-input-group",8),b.Ob(22,"input",9),b.Sb(),b.Ob(23,"app-field-error-display",5),b.Sb(),b.Sb(),b.Tb(24,"div",1),b.Tb(25,"div",2),b.Tb(26,"span"),b.Cc(27,"Nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u"),b.Sb(),b.Sb(),b.Tb(28,"div",3),b.Tb(29,"nz-input-group",8),b.Ob(30,"input",10),b.Sb(),b.Ob(31,"app-field-error-display",5),b.Ob(32,"app-field-error-display",11),b.Sb(),b.Sb(),b.Tb(33,"div",1),b.Tb(34,"div",2),b.Tb(35,"span"),b.Cc(36,"Quy\u1ec1n h\u1ea1n"),b.Sb(),b.Sb(),b.Tb(37,"div",3),b.Tb(38,"nz-select",12),b.Ac(39,I,1,2,"nz-option",13),b.Sb(),b.Ob(40,"app-field-error-display",14),b.Sb(),b.Sb(),b.Tb(41,"div",15),b.Tb(42,"div",16),b.Tb(43,"button",17),b.ac("click",(function(){return n.onClose()})),b.Cc(44,"Hu\u1ef7"),b.Sb(),b.Tb(45,"button",18),b.Cc(46),b.Sb(),b.Sb(),b.Sb(),b.Sb(),b.Ac(47,U,2,2,"ng-template",null,19,b.Bc)),2&t){const t=b.pc(48);b.jc("formGroup",n.form),b.zb(1),b.jc("nzGutter",16),b.zb(4),b.jc("ngClass",n.displayFieldCss("name")),b.zb(2),b.jc("displayError",n.isFieldValid("name")),b.zb(1),b.jc("nzGutter",16),b.zb(4),b.jc("ngClass",n.displayFieldCss("email")),b.zb(2),b.jc("displayError",n.isFieldValid("email")),b.zb(1),b.jc("displayError",n.form.get("email").hasError("email")),b.zb(1),b.jc("nzGutter",16),b.zb(4),b.jc("ngClass",n.displayFieldCss("password")),b.zb(1),b.jc("nzSuffix",t),b.zb(1),b.Ab("type",n.showPass?"text":"password"),b.zb(1),b.jc("displayError",n.isFieldValid("password")),b.zb(1),b.jc("nzGutter",16),b.zb(4),b.jc("ngClass",n.displayFieldCss("rePassword")),b.zb(1),b.jc("nzSuffix",t),b.zb(1),b.Ab("type",n.showPass?"text":"password"),b.zb(1),b.jc("displayError",n.isFieldValid("rePassword")),b.zb(1),b.jc("displayError",n.form.get("rePassword").touched&&n.form.get("rePassword").value!==n.form.get("password").value),b.zb(1),b.jc("nzGutter",16),b.zb(4),b.jc("ngClass",n.displayFieldCss("roles")),b.zb(2),b.jc("ngForOf",n.listRole),b.zb(1),b.jc("displayError",n.isFieldValid("roles")),b.zb(1),b.jc("nzGutter",16),b.zb(5),b.Dc("view"===n.modalData.action?"Th\xeam m\u1edbi":"L\u01b0u l\u1ea1i")}},directives:[r.u,r.n,r.i,T.c,T.a,e.l,v.a,r.c,r.m,r.g,j.a,C.a,v.b,v.c,E.b,e.m,y.a,D.a,E.a,e.n],styles:[""]}),t})();function G(t,n){if(1&t){const t=b.Ub();b.Tb(0,"button",21),b.ac("click",(function(){return b.rc(t),b.dc().getDataPaging()})),b.Ob(1,"i",22),b.Sb()}}function V(t,n){1&t&&(b.Tb(0,"nz-tag",30),b.Cc(1,"ADMIN"),b.Sb())}function x(t,n){1&t&&(b.Tb(0,"nz-tag",31),b.Cc(1,"USER"),b.Sb())}function L(t,n){if(1&t){const t=b.Ub();b.Tb(0,"nz-tag",32),b.ac("click",(function(){b.rc(t);const n=b.dc().$implicit;return b.dc().changeStatusNguoiDung(n.id)})),b.Cc(1,"B\u1ecb kho\xe1"),b.Sb()}}function _(t,n){if(1&t){const t=b.Ub();b.Tb(0,"nz-tag",33),b.ac("click",(function(){b.rc(t);const n=b.dc().$implicit;return b.dc().changeStatusNguoiDung(n.id)})),b.Cc(1,"Ho\u1ea1t \u0111\u1ed9ng"),b.Sb()}}function H(t,n){if(1&t){const t=b.Ub();b.Tb(0,"tr"),b.Tb(1,"td",23),b.Cc(2),b.Sb(),b.Tb(3,"td",24),b.Cc(4),b.Sb(),b.Tb(5,"td",24),b.Cc(6),b.Sb(),b.Tb(7,"td",23),b.Ac(8,V,2,0,"nz-tag",25),b.Ac(9,x,2,0,"nz-tag",26),b.Sb(),b.Tb(10,"td",23),b.Ac(11,L,2,0,"nz-tag",27),b.Ac(12,_,2,0,"nz-tag",28),b.Sb(),b.Tb(13,"td",23),b.Tb(14,"i",29),b.ac("click",(function(){b.rc(t);const i=n.$implicit,e=b.dc(),a=b.pc(36);return e.openFormNguoiDung(a,i)})),b.Sb(),b.Sb(),b.Sb()}if(2&t){const t=n.$implicit,i=n.index,e=b.dc();b.zb(2),b.Ec(" ",i+1+(e.listNguoiDung.currentPage-1)*e.listNguoiDung.limit," "),b.zb(2),b.Ec(" ",t.name?t.name:"<Ch\u01b0a c\u1eadp nh\u1eadt>"," "),b.zb(2),b.Ec(" ",t.email," "),b.zb(2),b.jc("ngIf",t.roles.includes("ROLE_ADMIN")),b.zb(1),b.jc("ngIf",t.roles.includes("ROLE_THI_SINH")),b.zb(2),b.jc("ngIf",!t.enable),b.zb(1),b.jc("ngIf",t.enable)}}function R(t,n){if(1&t){const t=b.Ub();b.Tb(0,"app-form-nguoi-dung",34),b.ac("closePopup",(function(n){return b.rc(t),b.dc().closePopup(n)})),b.Sb()}if(2&t){const t=b.dc();b.jc("modalData",t.modalData)}}const q=function(){return{standalone:!0}},X=[{path:"",component:(()=>{class t{constructor(t,n,i,e){this.nzModalSvc=t,this.spinner=n,this.alert=i,this.userSvc=e,this.modalData=new l.a,this.valueSearch="",this.listNguoiDung=new u.a}ngOnInit(){this.getDataPaging()}getDataPaging(){this.spinner.show(),this.userSvc.getAllUserPaging(this.listNguoiDung.currentPage-1,this.listNguoiDung.limit,this.valueSearch).subscribe(t=>{this.listNguoiDung.data=t.content,this.listNguoiDung.currentPage=t.pageable.pageNumber+1,this.listNguoiDung.limit=t.pageable.pageSize,this.listNguoiDung.totalItem=t.totalElements,this.listNguoiDung.totalPage=t.totalPages,this.spinner.hide()},()=>this.spinner.hide())}openFormNguoiDung(t,n){n?(this.modalData.action=c.a.ACTION.EDIT,this.modalData.data=n):this.modalData.action=c.a.ACTION.ADD,this.nzModalSvc.create({nzStyle:{top:"20px"},nzWidth:500,nzTitle:"QU\u1ea2N L\xdd NG\u01af\u1edcI D\xd9NG",nzContent:t,nzFooter:null})}changeStatusNguoiDung(t){this.nzModalSvc.confirm({nzTitle:"X\xe1c nh\u1eadn thay \u0111\u1ed5i tr\u1ea1ng th\xe1i?",nzOnOk:()=>{this.spinner.show(),this.userSvc.changeStatusUser(t).subscribe(()=>{this.alert.success(o.a.MSG_CHANGE_STATUS_DONE),this.spinner.hide(),this.getDataPaging()},()=>this.spinner.hide())},nzCancelText:"Kh\xf4ng"})}pageChange(t){this.listNguoiDung=t,this.getDataPaging()}closePopup(t){this.nzModalSvc.closeAll(),t&&this.getDataPaging()}}return t.\u0275fac=function(n){return new(n||t)(b.Nb(d.b),b.Nb(p.c),b.Nb(h.b),b.Nb(S))},t.\u0275cmp=b.Hb({type:t,selectors:[["app-list-nguoi-dung"]],decls:37,vars:9,consts:[["nz-row","",1,"mr-bot-10","text-center",3,"nzGutter"],["nz-col","","nzSpan","24"],["nz-row","",1,"mr-bot-10",3,"nzGutter"],["nz-col","","nzSpan","14"],["nz-col","","nzSpan","6",1,"text-right","mr-bot-5"],["nzSearch","",3,"nzAddOnAfter"],["type","text","nz-input","","placeholder","T\xecm ki\u1ebfm",3,"ngModel","ngModelOptions","ngModelChange","keyup.enter"],["suffixIconButton",""],["nz-col","","nzSpan","4",1,"text-right","mr-bot-5"],["nz-button","","nzType","primary","type","button",1,"w-100",3,"click"],[1,"fas","fa-plus","mr-right-5"],["nzBordered","","nzShowPagination","false",3,"nzData"],["dataTable",""],["nzWidth","5%","nzAlign","center"],["nzWidth","25%","nzAlign","center"],["nzWidth","30%","nzAlign","center"],["nzWidth","10%","nzAlign","center"],[1,"fas","fa-cog"],[4,"ngFor","ngForOf"],[3,"pageConfig","pageChange"],["formNguoiDung",""],["nz-button","","nzType","primary","nzSearch","",3,"click"],[1,"fas","fa-search"],["nzAlign","center"],["nzAlign","left"],["nzColor","orange",4,"ngIf"],["nzColor","blue",4,"ngIf"],["nzColor","red","class","pointer",3,"click",4,"ngIf"],["nzColor","green","class","pointer",3,"click",4,"ngIf"],[1,"fas","fa-edit","text-blue","pointer",3,"click"],["nzColor","orange"],["nzColor","blue"],["nzColor","red",1,"pointer",3,"click"],["nzColor","green",1,"pointer",3,"click"],[3,"modalData","closePopup"]],template:function(t,n){if(1&t){const t=b.Ub();b.Tb(0,"div",0),b.Tb(1,"div",1),b.Tb(2,"h2"),b.Cc(3,"QU\u1ea2N TR\u1eca NG\u01af\u1edcI D\xd9NG"),b.Sb(),b.Sb(),b.Sb(),b.Tb(4,"div",2),b.Ob(5,"div",3),b.Tb(6,"div",4),b.Tb(7,"nz-input-group",5),b.Tb(8,"input",6),b.ac("ngModelChange",(function(t){return n.valueSearch=t}))("keyup.enter",(function(){return n.getDataPaging()})),b.Sb(),b.Sb(),b.Ac(9,G,2,0,"ng-template",null,7,b.Bc),b.Sb(),b.Tb(11,"div",8),b.Tb(12,"button",9),b.ac("click",(function(){b.rc(t);const i=b.pc(36);return n.openFormNguoiDung(i)})),b.Ob(13,"i",10),b.Cc(14,"Th\xeam "),b.Sb(),b.Sb(),b.Tb(15,"div",1),b.Tb(16,"nz-table",11,12),b.Tb(18,"thead"),b.Tb(19,"tr"),b.Tb(20,"th",13),b.Cc(21,"STT"),b.Sb(),b.Tb(22,"th",14),b.Cc(23,"H\u1ecd t\xean"),b.Sb(),b.Tb(24,"th",15),b.Cc(25,"Email"),b.Sb(),b.Tb(26,"th",14),b.Cc(27,"Quy\u1ec1n h\u1ea1n"),b.Sb(),b.Tb(28,"th",16),b.Cc(29,"Tr\u1ea1ng th\xe1i"),b.Sb(),b.Tb(30,"th",13),b.Ob(31,"i",17),b.Sb(),b.Sb(),b.Sb(),b.Tb(32,"tbody"),b.Ac(33,H,15,7,"tr",18),b.Sb(),b.Sb(),b.Tb(34,"table-paginate",19),b.ac("pageChange",(function(t){return n.pageChange(t)})),b.Sb(),b.Sb(),b.Sb(),b.Ac(35,R,1,1,"ng-template",null,20,b.Bc)}if(2&t){const t=b.pc(10);b.jc("nzGutter",16),b.zb(4),b.jc("nzGutter",8),b.zb(3),b.jc("nzAddOnAfter",t),b.zb(1),b.jc("ngModel",n.valueSearch)("ngModelOptions",b.lc(8,q)),b.zb(8),b.jc("nzData",n.listNguoiDung.data),b.zb(17),b.jc("ngForOf",n.listNguoiDung.data),b.zb(1),b.jc("pageConfig",n.listNguoiDung)}},directives:[T.c,T.a,C.a,v.b,v.a,r.c,r.m,r.o,y.a,D.a,N.c,N.g,N.h,N.b,N.f,N.a,N.e,e.m,w.a,e.n,P.a,M],styles:[""]}),t})()}];let B=(()=>{class t{}return t.\u0275mod=b.Lb({type:t}),t.\u0275inj=b.Kb({factory:function(n){return new(n||t)},imports:[[s.e.forChild(X)],s.e]}),t})(),K=(()=>{class t{}return t.\u0275mod=b.Lb({type:t}),t.\u0275inj=b.Kb({factory:function(n){return new(n||t)},imports:[[e.c,B,r.j,r.r,a.a]]}),t})()}}]);